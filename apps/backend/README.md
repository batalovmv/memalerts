# MemAlerts Backend

Backend API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–µ–º–æ–≤ —á–µ—Ä–µ–∑ Twitch Channel Points. Express API —Å Socket.IO, PostgreSQL –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–µ–ø–ª–æ–µ–º —á–µ—Ä–µ–∑ GitHub Actions.

## üöÄ –¢–µ–∫—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Twitch OAuth**
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Twitch
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
  - JWT —Ç–æ–∫–µ–Ω—ã –≤ httpOnly cookies
  - –†–æ–ª–∏: viewer, streamer, admin

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–º–∞–º–∏**
  - –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–º–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∑–∞—è–≤–∫–∏ –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ)
  - –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ —Å—Ç—Ä–∏–º–µ—Ä–∞–º–∏ (–æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–µ–º–æ–≤ –∑—Ä–∏—Ç–µ–ª—è–º–∏ –∑–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤: image, gif, video, audio

- **–°–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–∞**
  - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç —á–µ—Ä–µ–∑ Twitch Channel Points (EventSub webhooks)
  - –¢—Ä–∞—Ç–∞ –º–æ–Ω–µ—Ç –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –º–µ–º–æ–≤
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Channel Points ‚Üí –º–æ–Ω–µ—Ç—ã

- **–ü—Ä–æ—Ñ–∏–ª–∏ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤**
  - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ slug –∫–∞–Ω–∞–ª–∞
  - –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–Ω–∞–ª–µ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —Å—Ç—Ä–∏–º–µ—Ä–∞

- **Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**
  - Socket.IO –¥–ª—è overlay –≤ OBS
  - –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ–º–æ–≤ –Ω–∞ overlay
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
  - Rate limiting –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –º–µ–º–æ–≤ (1 —Ä–∞–∑ –≤ 3 —Å–µ–∫—É–Ω–¥—ã)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod
  - HMAC –ø—Ä–æ–≤–µ—Ä–∫–∞ EventSub webhooks
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –∏ —Ç–∏–ø —Ñ–∞–π–ª–æ–≤
  - CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π**
  - CI/CD —á–µ—Ä–µ–∑ GitHub Actions
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ .env –∏–∑ GitHub Secrets
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
  - –î–µ–ø–ª–æ–π –Ω–∞ VPS —Å PM2

## üìã API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
- `GET /channels/:slug` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–µ –ø–æ slug

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `GET /auth/twitch` - –ò–Ω–∏—Ü–∏–∞—Ü–∏—è Twitch OAuth
- `GET /auth/twitch/callback` - Callback –æ—Ç Twitch OAuth
- `POST /auth/logout` - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

- `GET /me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `GET /wallet` - –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞
- `GET /memes` - –°–ø–∏—Å–æ–∫ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –º–µ–º–æ–≤ (`?channelSlug=xxx` –∏–ª–∏ `?channelId=xxx`)
- `POST /memes/:id/activate` - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–µ–º

### –ó–∞—è–≤–∫–∏ –Ω–∞ –º–µ–º—ã (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

- `POST /submissions` - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –º–µ–º (—Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–∞)
- `GET /submissions/mine` - –ü–æ–ª—É—á–∏—Ç—å –º–æ–∏ –∑–∞—è–≤–∫–∏

### –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (—Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å streamer/admin)

- `GET /admin/submissions` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞—è–≤–∫–∏ (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Å—Ç–∞—Ç—É—Å—É)
- `POST /admin/submissions/:id/approve` - –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É
- `POST /admin/submissions/:id/reject` - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É
- `GET /admin/memes` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–µ–º—ã –∫–∞–Ω–∞–ª–∞
- `PATCH /admin/memes/:id` - –û–±–Ω–æ–≤–∏—Ç—å –º–µ–º (—Ü–µ–Ω–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- `PATCH /admin/channel/settings` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞ (rewardIdForCoins, coinPerPointRatio)

### Webhooks

- `POST /webhooks/twitch/eventsub` - Webhook –æ—Ç Twitch EventSub –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Channel Points redemptions

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma    # Prisma —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts          # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ viewerController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ submissionController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminController.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhookController.ts
‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # Express middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rateLimit.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upload.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requireChannel.ts
‚îÇ   ‚îú‚îÄ‚îÄ routes/          # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ viewer.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ submissions.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhooks.ts
‚îÇ   ‚îú‚îÄ‚îÄ socket/          # Socket.IO –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ lib/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts
‚îÇ   ‚îú‚îÄ‚îÄ shared/          # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ Zod —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ci-cd.yml    # GitHub Actions CI/CD
‚îÇ   ‚îî‚îÄ‚îÄ scripts/         # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ uploads/             # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–º–µ–º—ã)
‚îî‚îÄ‚îÄ dist/                # –°–æ–±—Ä–∞–Ω–Ω—ã–π JavaScript –∫–æ–¥
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 18.0.0
- pnpm >= 8.0.0
- PostgreSQL >= 15

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pnpm install

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª (—Å–º. —Ä–∞–∑–¥–µ–ª "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è")
cp .env.example .env

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
pnpm db:push

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ dev —Ä–µ–∂–∏–º–µ
pnpm dev
```

### Production –¥–µ–ø–ª–æ–π

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions. –ü—Ä–∏ push –≤ –≤–µ—Ç–∫—É `main`:

1. –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã
2. –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–∑ GitHub Secrets
4. –ö–æ–¥ –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ VPS
5. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
6. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ PM2

## üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Secrets –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ GitHub Secrets

- `VPS_HOST` - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
- `VPS_USER` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: `deploy`)
- `VPS_SSH_KEY` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á
- `VPS_PORT` - –ü–æ—Ä—Ç SSH (–æ–±—ã—á–Ω–æ `22`)
- `DATABASE_URL` - –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `JWT_SECRET` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- `TWITCH_CLIENT_ID` - Client ID –∏–∑ Twitch –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `TWITCH_CLIENT_SECRET` - Client Secret –∏–∑ Twitch –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `TWITCH_EVENTSUB_SECRET` - –°–µ–∫—Ä–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ EventSub webhooks
- `WEB_URL` - URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- `OVERLAY_URL` - URL overlay

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ GitHub Secrets

- `DOMAIN` - –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è CALLBACK_URL)
- `TWITCH_CALLBACK_URL` - –Ø–≤–Ω—ã–π URL –¥–ª—è callback (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, —Å—Ç—Ä–æ–∏—Ç—Å—è –∏–∑ DOMAIN)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (.env)

```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/memalerts?schema=public"

# Server
PORT=3001
NODE_ENV=development

# JWT
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=7d

# Twitch OAuth
TWITCH_CLIENT_ID=your-twitch-client-id
TWITCH_CLIENT_SECRET=your-twitch-client-secret
TWITCH_CALLBACK_URL=http://localhost:3001/auth/twitch/callback

# Twitch EventSub
TWITCH_EVENTSUB_SECRET=your-eventsub-secret

# CORS
WEB_URL=http://localhost:5173
OVERLAY_URL=http://localhost:5174

# File Upload
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads
```

## üì¶ –ö–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pnpm dev              # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ —Å hot reload

# –°–±–æ—Ä–∫–∞
pnpm build            # –°–±–æ—Ä–∫–∞ TypeScript –≤ JavaScript

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
pnpm db:push          # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É Prisma –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π
pnpm db:migrate       # –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
pnpm db:seed          # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
pnpm db:studio        # –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (GUI –¥–ª—è –ë–î)

# Production
pnpm start            # –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Twitch

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ https://dev.twitch.tv/console/apps
2. –ü–æ–ª—É—á–∏—Ç–µ Client ID –∏ Client Secret
3. –î–æ–±–∞–≤—å—Ç–µ Redirect URL:
   - –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: `http://localhost:3001/auth/twitch/callback`
   - –î–ª—è production: `https://twitchmemes.ru/auth/twitch/callback`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ EventSub –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è `channel.channel_points_custom_reward_redemption.add`
5. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ GitHub Secrets

## üîÆ –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

### –ë–ª–∏–∂–∞–π—à–∏–µ –ø–ª–∞–Ω—ã

- [ ] **–°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –º–µ–º–æ–≤**
  - –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –º–µ–º–æ–≤
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (image, gif, video, audio)
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–Ω–µ
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ —Ü–µ–Ω–µ, –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏)

- [ ] **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤**
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∫ –º–µ–º–∞–º
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–º–æ–≤ –ø–æ —Ç–µ–≥–∞–º
  - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

- [ ] **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞**
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (Stripe, PayPal)
  - –ü–æ–∫—É–ø–∫–∞ –º–æ–Ω–µ—Ç –∑–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏
  - –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –±–æ–Ω—É—Å—ã
  - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

- [ ] **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–π –º–µ–º–æ–≤
  - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ–º—ã
  - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤

- [ ] **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è**
  - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –Ω–∞ –∫–∞–Ω–∞–ª
  - –û—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è (AI)
  - –ß–µ—Ä–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã

- [ ] **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–∏–º–µ—Ä–æ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏
  - –û–±—â–∏–µ –º–µ–º—ã –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏

- [ ] **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –º–µ–º–∞–º
  - –†–µ–π—Ç–∏–Ω–≥–∏ –º–µ–º–æ–≤
  - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –º–µ–º—ã
  - –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–π

- [ ] **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
  - React Native –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –º–µ–º–∞—Ö
  - –ë—ã—Å—Ç—Ä–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –º–µ–º–æ–≤

- [ ] **API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
  - –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  - Webhooks –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  - SDK –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤

- [ ] **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**
  - –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏
  - –†–µ–∫–ª–∞–º–∞ –≤ –º–µ–º–∞—Ö
  - –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `DATABASE_URL` –≤ `.env` –∏–ª–∏ GitHub Secrets
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `memalerts` —Å–æ–∑–¥–∞–Ω–∞

### EventSub –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook URL –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TWITCH_EVENTSUB_SECRET` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ–∫—Ä–µ—Ç–æ–º –≤ –ø–æ–¥–ø–∏—Å–∫–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `pm2 logs memalerts-api`

### –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `uploads/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `MAX_FILE_SIZE` –≤ `.env`

### –î–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ GitHub Secrets –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–ª—é—á –∏ –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Node.js, pnpm, PostgreSQL, PM2

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
