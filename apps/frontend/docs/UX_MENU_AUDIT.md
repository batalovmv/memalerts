# UX-аудит: меню и расстановка кнопок (Memalerts Frontend)

## Контекст и ограничения

Этот аудит сделан **по исходникам** (без просмотра реальных экранов/аналитики кликов). Фокус: **глобальное меню (хедер)**, **выпадающее меню профиля**, **группировка в настройках** и **когнитивная сложность**.

Ключевая идея навигации в текущей реализации: продукт поддерживает **две “роли интерфейса” (UI mode)** — `viewer` и `streamer` — и часть пунктов меню меняется в зависимости от режима.

## Где находится меню и что считается “главным меню”

- **Глобальная навигация** находится в верхнем хедере (`Header`): логотип слева, действия/индикаторы и профиль справа.
- Отдельного “основного меню” (например, полноценного топ-навига бара со ссылками на разделы) нет — вместо этого используются:
  - “умные” action-кнопки (например, уведомления/requests),
  - переходы через меню профиля,
  - вкладки внутри Settings.

Это важное UX-решение: продукт выглядит как **task-oriented** интерфейс (делай действие → переходи по контекстной кнопке), а не как “портал с разделами”.

## Хедер: расстановка кнопок и логика

### Состав (справа)

1. **Requests / Notifications** (колокольчик) — совмещает два типа событий:
   - стример/админ: pending approvals;
   - viewer: “needs changes” (мои сабмиты, требующие правок).
2. **Submit** — показывается контекстно (только “на своих” страницах: `/dashboard`, `/settings/*`, или на собственной странице канала).
3. **Balance** — баланс/коины (с бейджем дельты).
4. **UserMenu** — меню профиля (выпадайка).

### Что сделано хорошо (менять не стоит)

- **Контекстность Submit**: кнопка не засоряет чужие профили/каналы и появляется там, где пользователь ожидает “работать” со своим контентом.
- **Объединение requests в одну кнопку** уменьшает число иконок справа (не раздувает хедер).
- **Подсказки (HelpTooltip)**: это хороший “safety net”, если включён help-mode.
- **Адаптация под гостя**: кнопки показываются как preview, но ведут в auth (понятный сценарий, без “мертвых” элементов).

### Где может страдать UX (риск путаницы)

- **Слишком умная логика колокольчика**:
  - в разных ролях и состояниях он ведёт в разные места (иногда сразу навигация, иногда поповер выбора);
  - пользователю сложно сформировать “мышечную память”: “куда меня отправит эта кнопка?”
  - особенно это заметно при наличии одновременно pending approvals и needs-changes.
- **Balance как кнопка**: выглядит кликабельным action (и им является), но смысл клика не очевиден (сейчас он сбрасывает `coinUpdateDelta`).

## Выпадающее меню профиля: какие пункты и когда

Меню профиля зависит от `uiMode` (эффективный режим интерфейса).

### В режиме `viewer`

- **My submissions**
- **Link accounts** (ведёт на `/settings/accounts`)
- **Switch to streamer mode** *(только если пользователь может быть стримером/админом и есть channelId)*
- **Moderation** *(только при наличии прав глобальной модерации)*
- Разделитель
- **Logout**

### В режиме `streamer`

- **Public profile** *(если есть канал и slug)* — в viewer mode это трактуется как “публичная страница канала, который я смотрю”, в streamer mode — “мой публичный канал”
- **Settings** (ведёт на `/settings?tab=settings`)
- **Meme pool**
- **Moderation** *(только при наличии прав)*
- **Dashboard** *(если streamer/admin)*
- Разделитель
- **Logout**

### Что сделано хорошо (менять не стоит)

- **Меню короткое** (в каждом режиме — несколько пунктов + logout).
- **Ролевые пункты условные** (moderation/dashboard не видны всем).
- **Keyboard a11y**: управление стрелками/escape/focus — это прям сильная сторона (обычно на это забивают).

### Где может страдать UX (риск путаницы)

- **Два разных mental model в одном продукте: viewer vs streamer**:
  - у пользователя появляется скрытая “переменная состояния” (режим), которая влияет на доступные пункты и смысл некоторых переходов;
  - “Public profile” в viewer режиме означает “куда я смотрю”, а в streamer режиме — “мой канал” → это один и тот же лейбл, но разные ожидания.
- **“Link accounts” живёт в профиле и в Settings** (как отдельная вкладка): это может создавать ощущение дублирования/непонятного “главного места”.

## Настройки: что внутри Settings и где “доп. настройки”

### Основные вкладки (primary tabs) — только для streamer/admin (и только в streamer UI mode)

- **Оформление** (`settings`)
- **Награды** (`rewards`)
- **OBS** (`obs`)
- **Bot** (`bot`)

### “Доп. настройки” в меню “More” (три точки)

Там лежат вкладки, которые считаются вторичными / реже используемыми:

- **Statistics** (`statistics`)
- **Promotions** (`promotions`)
- **Wallet management** (`wallets`) *(условно, только при admin/streamer-admin; при этом в текущем рендере содержимого вкладка “wallets” фактически ограничена `user.role === 'admin'`)*
- **Entitlements** (`entitlements`) *(admin only)*
- **Owner: Meme assets** (`ownerMemeAssets`) *(admin only)*
- **Owner: Moderators** (`ownerModerators`) *(admin only)*
- **Beta access** (`beta`) *(есть и для viewer: self; и для admin: management)*
- **Accounts** (`accounts`)

### Что видит viewer в Settings

Viewer-режим ограничен до:

- **Beta access**
- **Accounts**

Навигационно это выражено так: primary tabs отсутствуют, а переключение происходит через “More” и/или активную вкладку, которую UI дополнительно показывает как “таб” когда она активна.

### Что сделано хорошо (менять не стоит)

- **Primary tabs = 4 штуки** — это нормальная нагрузка для верхнего уровня настроек.
- **More-menu как “второй уровень”** — здоровая попытка скрыть редкие/админские разделы.
- **Deep-link поддержка**: `/settings/accounts` работает и синхронизирует активную вкладку.
- **Автоматические редиректы** (“submissions/memes переехали в dashboard”) — убирают “старые пути” и сохраняют совместимость.

### Где страдает UX (риск “слишком сложно”)

- **Непрозрачная граница “Settings vs Admin”**:
  - роут называется `/settings/*`, но внутри лежат не только “настройки канала”, а также админские сущности (entitlements, owner moderation и т.п.).
  - это может выглядеть как “в настройках слишком много всего”, даже если пункты скрыты.
- **More-menu смешивает разные классы сущностей**:
  - там одновременно “обычные настройки” (Accounts/Beta), “аналитика” (Statistics), “биллинг/кошельки” (Wallets), “промо” (Promotions) и “owner/admin” (Entitlements/Owner…).
  - с точки зрения UX это выглядит как “раздел-свалка”.
- **Viewer попадает в Settings, но основная UI-шапка настроек заточена под streamer/admin** (табы + more). Для viewer это может казаться “не своим” экраном.

## Итог: где у вас “страдает”, а где “отлично”

### Отлично и лучше не трогать

- Хедер компактный, экшены понятны по иконкам, есть help-tooltips и а11y.
- Submit скрыт/показан контекстно — это снижает визуальный шум.
- Settings имеет разумные 4 primary-вкладки.
- Скрытие admin-only пунктов и клавиатурная навигация меню — сильные стороны.

### Страдает (кандидаты на упрощение)

- Скрытая сложность “двух режимов UI” (viewer/streamer) + переопределение смысла некоторых пунктов (“Public profile”).
- Колокольчик/requests ведёт себя по-разному в зависимости от состояния — ломает предсказуемость.
- More-menu в Settings выглядит как смесь “всего подряд” (accounts/beta + админ + аналитика + кошельки).

## Самые дешёвые улучшения (без ломки архитектуры)

1. **Сделать поведение requests более предсказуемым**:
   - один стабильный паттерн (всегда поповер с выбором при наличии нескольких типов, всегда переход в один экран при одном типе).
2. **Уточнить лейблы, которые меняют смысл между режимами**:
   - например, “Public profile” → “Current channel” (в viewer) / “My channel” (в streamer), или похожее.
3. **В Settings разделить “More” визуально на группы**:
   - например, “Account”, “Channel”, “Admin” с разделителями (без изменения роутинга).


